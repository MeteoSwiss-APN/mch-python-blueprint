
[isort]
default_section = THIRDPARTY
force_grid_wrap = 0
force_single_line = 1
line_length = 88
order_by_type = false
# Headings
import_heading_stdlib = Standard library
import_heading_thirdparty = Third-party
import_heading_firstparty = First-party
import_heading_localfolder = Local
# Known modules to avoid misclassification
known_standard_library =
    # Add standard library modules that are misclassified by isort
known_third_party =
    # Add third-party modules that are misclassified by isort
    click
known_first_party =
    # Add first-party modules that are misclassified by isort
    {{ cookiecutter.project_slug }}

[flake8]
exclude = docs
max-line-length = 88
ignore =
    E203, # Allow whitespace before ':' (https://github.com/PyCQA/pycodestyle/issues/373)
    F811, # Allow redefinition of unused name (necessary for typing.overload)
    I002, # Don't check for isort configuration
    W503, # Allow line break before binary operator (PEP 8-compatible)

[pydocstyle]
# All codes: http://www.pydocstyle.org/en/stable/error_codes.html
ignore =
    # D100, # Missing docstring in public module
    D101, # Missing docstring in public class
    D102, # Missing docstring in public method
    D103, # Missing docstring in public function
    # D104, # Missing docstring in public package
    D105, # Missing docstring in magic method
    # D105, # Missing docstring in public nested class
    # D107, # Missing docstring in __init__
    D203, # Blank line required before class docstring
    D213, # Multi-line docstring summary should start at the second line
    # D405, # Section name should be properly capitalized
    D406, # Section name should end with a newline
    D407, # Missing dashed underline after section

[pytest]
testpaths = tests
addopts =
    -s
    -ra
    --pdbcls=IPython.terminal.debugger:TerminalPdb
	--tb=short
    # --cov={{ cookiecutter.project_slug }}
    # --mypy

# TODO add pydocstyle & mccabe
[tox]
envlist =
    py37
    flake8
    pylint
    mypy
requires =
    tox-conda
conda_channels =
    conda-forge
    default
conda_env = requirements/dev-environment.yml

[testenv]
setenv =
    PYTHONPATH = {toxinidir}
install_command =
    pip install -U {opts} {packages}
conda_deps =
    pytest
    # pytest-cov
    # pytest-mypy
commands = pytest --basetemp={envtmpdir} {posargs}

[testenv:flake8]
skip_install = true
conda_deps =
    flake8
commands = flake8 src tests

[testenv:pylint]
conda_deps =
    pylint
conda_install_args=
    --file={toxinidir}/requirements/requirements.in
commands = pylint --rcfile=tox.ini src

[testenv:pre-commit]
skip_install = true
conda_deps =
    pre-commit
commands = pre-commit run --all-files

[testenv:mypy]
skip_install = true
conda_deps =
    mypy
# Note: Files in ./tests are currently not checked because they are not found
# Reason: Recursive file discovery in mypy is broken
# (https://github.com/python/mypy/issues/6385)
# Awaiting this to be released: https://github.com/python/mypy/pull/9636
commands = mypy --install-types --non-interactive src  # tests
