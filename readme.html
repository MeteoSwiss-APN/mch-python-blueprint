<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Getting started &#8212; MCH Python Blueprint 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=2389946f"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FAQ and Troubleshooting" href="faq.html" />
    <link rel="prev" title="MeteoSwiss-APN Python blueprint" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h1>
<a class="reference external image-reference" href="https://meteoswiss-apn.github.io/mch-python-blueprint/"><img alt="docs" src="https://github.com/MeteoSwiss-APN/mch-python-blueprint/actions/workflows/blueprint-docs.yaml/badge.svg" /></a>
<a class="reference external image-reference" href="https://github.com/MeteoSwiss-APN/mch-python-blueprint/actions/workflows/blueprint-pre-commit.yml"><img alt="Pre-Commit" src="https://github.com/MeteoSwiss-APN/mch-python-blueprint/actions/workflows/blueprint-pre-commit.yml/badge.svg" /></a>
<p>Template for a simple Python project for <code class="docutils literal notranslate"><span class="pre">`copier</span></code> &lt;<a class="reference external" href="https://github.com/copier-org/copier">https://github.com/copier-org/copier</a>&gt;`_. This readme will guide you through setting up your package (if you are new to packaging in Python, check the Python Packaging User Guide (<a class="reference external" href="https://packaging.python.org/en/latest/">https://packaging.python.org/en/latest/</a>) with the provided template.
More information on the tools, intended workflow, etc. can be found on
GH pages of this repository (<a class="reference external" href="https://meteoswiss-apn.github.io/mch-python-blueprint/">https://meteoswiss-apn.github.io/mch-python-blueprint/</a>).</p>
<section id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Permalink to this heading">¶</a></h2>
<p>Ensure that your active Python version is 3.7 or higher.
The recommended way to manage Python versions is with <code class="docutils literal notranslate"><span class="pre">Conda</span></code>
(<a class="reference external" href="https://docs.conda.io/en/latest/">https://docs.conda.io/en/latest/</a>).
On CSCS machines it is recommended to install the leaner <code class="docutils literal notranslate"><span class="pre">Miniconda</span></code>
(<a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">https://docs.conda.io/en/latest/miniconda.html</a>),
which offers enough functionality for most of our use cases.
If you don’t want to do this step manually, you may use the script that is
provided in the copier template <code class="docutils literal notranslate"><span class="pre">tmpl/tools/setup_miniconda.sh</span></code>.
The default installation path of this script is the current working directory,
you might want to change that with the <code class="docutils literal notranslate"><span class="pre">-p</span></code> option to a common location for all
environments, like e.g. <code class="docutils literal notranslate"><span class="pre">$SCRATCH</span></code>. If you want the script to immediately
initialize conda (executing <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">init</span></code> and thereby adding a few commands at the
end of your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>) after installation, add the <code class="docutils literal notranslate"><span class="pre">-u</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmpl/tools/setup_miniconda.sh<span class="w"> </span>-p<span class="w"> </span><span class="nv">$SCRATCH</span><span class="w"> </span>-u
</pre></div>
</div>
<p>In case you ever need to uninstall miniconda, do the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>init<span class="w"> </span>--reverse<span class="w"> </span>--all
rm<span class="w"> </span>-rf<span class="w"> </span><span class="nv">$SCRATCH</span>/miniconda
</pre></div>
</div>
</section>
<section id="install-copier">
<h2>Install Copier<a class="headerlink" href="#install-copier" title="Permalink to this heading">¶</a></h2>
<p>First you have to install copier and its requirements. Ideally you do this in a conda environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>blueprint
conda<span class="w"> </span>activate<span class="w"> </span>blueprint
conda<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;copier&lt;8.0&quot;</span>
</pre></div>
</div>
</section>
<section id="create-your-python-package-from-our-template">
<h2>Create your Python package from our template<a class="headerlink" href="#create-your-python-package-from-our-template" title="Permalink to this heading">¶</a></h2>
<p>You can now produce your Python package from a copier template by running</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">blueprint</span>
<span class="n">copier</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">MeteoSwiss</span><span class="o">-</span><span class="n">APN</span><span class="o">/</span><span class="n">mch</span><span class="o">-</span><span class="n">python</span><span class="o">-</span><span class="n">blueprint</span><span class="o">.</span><span class="n">git</span> <span class="o">&lt;/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">destination</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If you need to generate your project from a specific commit hash or branch of the blueprint you can run with –vcs-ref</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">blueprint</span>
<span class="n">copier</span> <span class="o">--</span><span class="n">vcs</span><span class="o">-</span><span class="n">ref</span> <span class="o">&lt;</span><span class="n">branch</span><span class="o">&gt;</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">MeteoSwiss</span><span class="o">-</span><span class="n">APN</span><span class="o">/</span><span class="n">mch</span><span class="o">-</span><span class="n">python</span><span class="o">-</span><span class="n">blueprint</span><span class="o">.</span><span class="n">git</span> <span class="o">&lt;/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">destination</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Warning:</strong>
Copier does not work with older git versions (e.g. the standard one on Tsa). Not having an up-to-date git version will lead to cryptic error messages. On CSCS machines, you can get an up-to-date git version with <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">git</span></code>.</p>
</section>
<section id="set-up-your-project-on-github">
<h2>Set up your project on GitHub<a class="headerlink" href="#set-up-your-project-on-github" title="Permalink to this heading">¶</a></h2>
<p><strong>Warning:</strong> Before setting up your project, think carefully, whether you want to have your repository public or private and whether the provided licence
suits your need. The package comes with an MIT license, therefore do not commit proprietary code before carefully reviewing or changing the license.
Once you have made up your mind, go to the repository created by copier, i.e. your project
repository and initialize git with the following sequence of commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>&lt;/path/to/your/package&gt;
git<span class="w"> </span>init
git<span class="w"> </span>add<span class="w"> </span>.
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span>“initial<span class="w"> </span>commit”
</pre></div>
</div>
<p>Create the repository on MeteoSwiss-APN github. <strong>Attention</strong>: the name here must correspond to the information given to copier. Then follow the steps on
GitHub under the headline “…or push an existing repository from the command line to connect your repository to the remote on GitHub. A .gitignore template
is not needed as there is one provided in the blueprint. <strong>Attention</strong>: It’s recommended to use the ssh URL and not https as recommended in the given
instructions. The URL has the form git(at)github.com:MeteoSwiss-APN/your_fancy_package.
<strong>Disclaimer</strong> It is assumed you know how to use git, in particular how to implement features on a branch and merge them to the main branch using pull requests.
Avoid working directly on the main branch after the initial commit (or the first few commits if you start alone and from scratch).</p>
</section>
<section id="start-developing-your-package">
<h2>Start developing your package<a class="headerlink" href="#start-developing-your-package" title="Permalink to this heading">¶</a></h2>
<p>For first steps with your project, how to install it, setup and run the development tools, see the documentation of an example project, <a class="reference external" href="https://meteoswiss-apn.github.io/mch-python-blueprint/example_project/README.html">https://meteoswiss-apn.github.io/mch-python-blueprint/example_project/README.html</a>.
Find
out more about provided development tools and setting up CI/CD pipelines on <a class="reference external" href="https://meteoswiss-apn.github.io/mch-python-blueprint/">https://meteoswiss-apn.github.io/mch-python-blueprint/</a> .</p>
</section>
<section id="update-template">
<h2>Update template<a class="headerlink" href="#update-template" title="Permalink to this heading">¶</a></h2>
<p>To update your package to the latest version of the underlying meta template, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>copier<span class="w"> </span>-a<span class="w"> </span>.copier-answers.yml<span class="w"> </span>-f<span class="w"> </span>update
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">-f</span></code>, conflicting files are overwritten (which doesn’t mean that in the end, the files are changed as those conflicts can be purely internal).</p>
</section>
</section>
<section id="contributing-to-the-blueprint-code">
<h1>Contributing to the blueprint code<a class="headerlink" href="#contributing-to-the-blueprint-code" title="Permalink to this heading">¶</a></h1>
<p>Improvements and bug fixes for the blueprint are welcome! You can either open an issue on GitHub, or contribute with a pull request!
If you open a pull request, please make sure that the CI/CD pipeline validates before requesting a review. Here is a short description of the implemented tests:</p>
<ul class="simple">
<li><p>GitHub Actions (<code class="docutils literal notranslate"><span class="pre">.github/workflow/*</span></code>): GitHub Actions are triggered automatically when you push to the repository. There main purpose is to run the pre-commit hooks (linter, checkers) on the blueprint code and on a test package created with the blueprint. In the main branch the GitHub Actions also trigger the deployment of the documentation on GitHUb Pages. Check that everything (except the deployment of the documentation) is green!</p></li>
<li><p>Jenkins (<code class="docutils literal notranslate"><span class="pre">jenkins/Jenkinsfile</span></code>): Jenkins tests the installation of a test package created with the blueprint in different configurations (pinned and unpinned dependencies, non-editable and editable (development) mode). Jenkins is triggered automatically on pushes to the main branch. In your pull request, please trigger Jenkins manually by writing <code class="docutils literal notranslate"><span class="pre">launch</span> <span class="pre">jenkins</span></code> in a comment. Please make sure that the Jenkins plan is green!</p></li>
</ul>
<p>Thank you very much!</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">MCH Python Blueprint</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preparation">Preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-copier">Install Copier</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-your-python-package-from-our-template">Create your Python package from our template</a></li>
<li class="toctree-l2"><a class="reference internal" href="#set-up-your-project-on-github">Set up your project on GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="#start-developing-your-package">Start developing your package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update-template">Update template</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#contributing-to-the-blueprint-code">Contributing to the blueprint code</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ and Troubleshooting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_tools.html">Development Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci_cd.html">CI / CD (Jenkins and GH Actions)</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">MeteoSwiss-APN Python blueprint</a></li>
      <li>Next: <a href="faq.html" title="next chapter">FAQ and Troubleshooting</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, MeteoSwiss-APN.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/readme.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>