<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Contributing &#8212; MCH Python Blueprint 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=2389946f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this heading">¶</a></h1>
<p>Contributions are welcome, and they are greatly appreciated! Every little bit helps, and credit will always be given.</p>
<section id="types-of-contributions">
<h2>Types of Contributions<a class="headerlink" href="#types-of-contributions" title="Permalink to this heading">¶</a></h2>
<p>You can contribute in many ways.</p>
<section id="report-bugs">
<h3>Report Bugs<a class="headerlink" href="#report-bugs" title="Permalink to this heading">¶</a></h3>
<p>Report bugs as <a class="reference external" href="https://github.com/MeteoSwiss-APN/flying-circus/issues">GitHub issues</a>.</p>
<p>If you are reporting a bug, please include</p>
<ul class="simple">
<li><p>your operating system name and version,</p></li>
<li><p>any details about your local setup that might be helpful in troubleshooting, and</p></li>
<li><p>detailed steps to reproduce the bug.</p></li>
</ul>
</section>
<section id="fix-bugs">
<h3>Fix Bugs<a class="headerlink" href="#fix-bugs" title="Permalink to this heading">¶</a></h3>
<p>Look through the <a class="reference external" href="https://github.com/MeteoSwiss-APN/flying-circus/issues">GitHub issues</a> for bugs. Anything tagged with “bug” and “help wanted” is open to whoever wants to implement it.</p>
</section>
<section id="implement-features">
<h3>Implement Features<a class="headerlink" href="#implement-features" title="Permalink to this heading">¶</a></h3>
<p>Look through the  <a class="reference external" href="https://github.com/MeteoSwiss-APN/flying-circus/issues">GitHub issues</a> for features. Anything tagged with “enhancement” and “help wanted” is open to whoever wants to implement it.</p>
</section>
<section id="write-documentation">
<h3>Write Documentation<a class="headerlink" href="#write-documentation" title="Permalink to this heading">¶</a></h3>
<p>Flying Circus could always use more documentation, whether as part of the official Flying Circus docs, in docstrings — or even on the web in blog posts, articles, and such.</p>
</section>
<section id="submit-feedback">
<h3>Submit Feedback<a class="headerlink" href="#submit-feedback" title="Permalink to this heading">¶</a></h3>
<p>The best way to send feedback is to file a <a class="reference external" href="https://github.com/MeteoSwiss-APN/flying-circus/issues">GitHub issue</a>.</p>
<p>If you are proposing a feature,</p>
<ul class="simple">
<li><p>explain in detail how it would work;</p></li>
<li><p>keep the scope as narrow as possible, to make it easier to implement; and</p></li>
<li><p>remember that this is a volunteer-driven project, and that contributions are welcome! :)</p></li>
</ul>
</section>
</section>
<section id="get-started">
<h2>Get Started!<a class="headerlink" href="#get-started" title="Permalink to this heading">¶</a></h2>
<p>Ready to contribute? Here’s how to set up <code class="docutils literal notranslate"><span class="pre">flying-circus</span></code> for local development.</p>
<ol class="arabic">
<li><p>Fork the <code class="docutils literal notranslate"><span class="pre">`flying-circus</span></code> repo &lt;<a class="reference external" href="https://github.com/">https://github.com/</a>&gt;`_ on GitHub.</p></li>
<li><p>Clone your fork locally:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:your_name_here/flying-circus.git
</pre></div>
</div>
</li>
<li><p>Create a virtual environment and install the dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>flying-circus/
./tools/setup_env.sh
</pre></div>
</div>
<p>This will create a conda environment named <code class="docutils literal notranslate"><span class="pre">flying-circus</span></code> (change with <code class="docutils literal notranslate"><span class="pre">-n</span></code>) and install the pinned runtime and development dependencies in <code class="docutils literal notranslate"><span class="pre">requirements/environment.yml</span></code>.</p>
<p>Install the package itself in editable mode.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>flying-circus
pip<span class="w"> </span>install<span class="w"> </span>--editable<span class="w"> </span>.
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">-u</span></code> to get the newest package versions (unpinned dependencies in <code class="docutils literal notranslate"><span class="pre">requirements/requirements.yml</span></code>), and additionally <code class="docutils literal notranslate"><span class="pre">-e</span></code> to update the environment files.</p>
</li>
<li><p>Create a branch for local development:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>switch<span class="w"> </span>-c<span class="w"> </span>name-of-your-bugfix-or-feature
</pre></div>
</div>
<p>Now you can make your changes locally.</p>
</li>
<li><p>When you’re done with a change, format and check the code using various installed tools like <code class="docutils literal notranslate"><span class="pre">black</span></code>, <code class="docutils literal notranslate"><span class="pre">isort</span></code>, <code class="docutils literal notranslate"><span class="pre">mypy</span></code>, <code class="docutils literal notranslate"><span class="pre">flake8</span></code> or <code class="docutils literal notranslate"><span class="pre">pylint</span></code>. Those that are set up as pre-commit hooks can be run together with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit<span class="w"> </span>run<span class="w"> </span>-a
</pre></div>
</div>
<p>Next, ensure that the code does what it is supposed to do by running the tests with pytest:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest
</pre></div>
</div>
</li>
<li><p>Commit your changes and push your branch to GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>add<span class="w"> </span>.
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;fixed this and did that&quot;</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>name-of-your-bugfix-or-feature
</pre></div>
</div>
</li>
<li><p>Submit a pull request through the GitHub website.</p></li>
</ol>
</section>
<section id="pull-request-guidelines">
<h2>Pull Request Guidelines<a class="headerlink" href="#pull-request-guidelines" title="Permalink to this heading">¶</a></h2>
<p>Before you submit a pull request, check that it meets these guidelines:</p>
<ol class="arabic simple">
<li><p>The pull request should include tests.</p></li>
<li><p>If the pull request adds functionality, the docs should be updated. Put your new functionality into a function with a docstring, and add the feature to the list in <code class="docutils literal notranslate"><span class="pre">README.md</span></code>.</p></li>
<li><p>The pull request should work for Python 3.6 and 3.7, and for PyPy. Make sure that the tests pass for all supported Python versions.</p></li>
</ol>
</section>
<section id="tips">
<h2>Tips<a class="headerlink" href="#tips" title="Permalink to this heading">¶</a></h2>
<p>For a subset of tests or a specific test, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest<span class="w"> </span>tests.test_flying_circus
pytest<span class="w"> </span>tests.test_flying_circus/test_feature::test_edge_case
</pre></div>
</div>
</section>
<section id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this heading">¶</a></h2>
<p>In order to release a new version of your project, follow these steps:</p>
<ul class="simple">
<li><p>Make sure everything is committed, cleaned up and validating (duh!). Don’t forget to keep track of the changes in <code class="docutils literal notranslate"><span class="pre">HISTORY.md</span></code>.</p></li>
<li><p>Increase the version number that is hardcoded in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> (and only there) and commit.</p></li>
<li><p>Either create a (preferentially annotated) tag with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span></code>, or directly create a release on GitHub.</p></li>
</ul>
</section>
<section id="project-structure">
<h2>Project Structure<a class="headerlink" href="#project-structure" title="Permalink to this heading">¶</a></h2>
<p>Following is a description of the most important files and folders in the project in alphabetic order.</p>
<ul class="simple">
<li><p><cite>.github/workflows/</cite>: [GitHub Actions](<a class="reference external" href="https://docs.github.com/en/actions">https://docs.github.com/en/actions</a>) workflows, e.g., checks that are run when certain branches are pushed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docs/</span></code>: Documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jenkins/</span></code>: Jenkins setup.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">requirements/</span></code>: Project dependencies and environment</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">environment.yml</span></code>: Full tree of runtime and development dependencies with fully specified (‘pinned’) version numbers; created with <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">export</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">requirements.yml</span></code>: Top-level runtime and development dependencies with minimal version restrictions (typically a minimum version or a version range); kept manually.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/flying_circus/</span></code>: Source code of the project package.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tests/test_flying_circus/</span></code>: Unit tests of the project package; run with <code class="docutils literal notranslate"><span class="pre">pytest</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools/</span></code>: Scripts primarily for development</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">run-mypy.sh</span></code>: Run script for the static type checker <code class="docutils literal notranslate"><span class="pre">mypy</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup_env.sh</span></code>: Script to create new conda environments; see <code class="docutils literal notranslate"><span class="pre">tools/setup_env.sh</span> <span class="pre">-h</span></code> for all available options.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup_miniconda.sh</span></code>: Script to install miniconda.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>: Files and folders ignored by <code class="docutils literal notranslate"><span class="pre">git</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.pre-commit-config.yaml</span></code>: Configuration of pre-commit hooks, which are formatters and checkers run before a successful commit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AUTHORS.md</span></code>: Project authors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONTRIBUTING.md</span></code>: Instructions on how to contribute to the project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HISTORY.md</span></code>: List of changes for each version of the project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LICENSE</span></code>: License of the project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MANIFEST.in</span></code>: Files installed alongside the source code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>: Main package specification file, including build dependencies, metadata and the configurations of development tools like <code class="docutils literal notranslate"><span class="pre">black</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest</span></code>, <code class="docutils literal notranslate"><span class="pre">mypy</span></code> etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code>: Description of the project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">USAGE.md</span></code>: Information on how to use the package.</p></li>
</ul>
</section>
<section id="managing-dependencies">
<h2>Managing dependencies<a class="headerlink" href="#managing-dependencies" title="Permalink to this heading">¶</a></h2>
<p>Flying Circus uses <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> to manage dependencies. (Also check out <a class="reference external" href="https://mamba.readthedocs.io/en/latest/">Mamba</a> if you like your package installations fast.) Dependencies are specified in YAML files, of which there are two:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">requirements/requirements.yml</span></code>: Top-level runtime and development dependencies with minimal version restrictions (typically a minimum version or a version range); kept manually.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">requirements/environment.yml</span></code>: Full tree of runtime and development dependencies with fully specified (‘pinned’) version numbers; created with <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">export</span></code>.</p></li>
</ul>
<p>The pinned <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file should be used to create reproducible environments for development or deployment. This ensures reproducible results across machines and users. The unpinned <code class="docutils literal notranslate"><span class="pre">requirements.yml</span></code> file has two main purposes: (i) keeping track of the top-level dependencies, and (ii) periodically updating the pinned <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file to the latest package versions.</p>
<p>After introducing new first-level dependencies to your requirements, you have to update the environment files in order to be able to create reproducible environments for deployment and production.
Updating the environment files involves the following steps:</p>
<ol class="arabic simple">
<li><p>Creating an environment from your top-level dependencies in <code class="docutils literal notranslate"><span class="pre">requirements/requirements.yml</span></code></p></li>
<li><p>Exporting this environment to <code class="docutils literal notranslate"><span class="pre">requirements/environment.yml</span></code></p></li>
</ol>
<p>Alternatively, use the provided script</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./tools/setup_env.sh<span class="w"> </span>-ue
</pre></div>
</div>
<p>to create a environment from unpinned (<code class="docutils literal notranslate"><span class="pre">-u</span></code>) runtime and development dependencies and export (<code class="docutils literal notranslate"><span class="pre">-e</span></code>) it (consider throwing in <code class="docutils literal notranslate"><span class="pre">-m</span></code> for good measure to speed things up with <code class="docutils literal notranslate"><span class="pre">mamba</span></code>).</p>
<p><em>Note that the separation of unpinned runtime and development dependencies into separate files (``requirements.yml`` and ``dev-requirements.yml``, respectively) has been given up because when creating an environment from multiple YAML files (with ``conda env create`` and ``conda env update``), only the version restrictions in the last file are guaranteed to be respected, so when installing devevelopment dependencies from ``dev-requirements.yml`` into an environment created from ``requirements.yml``, the solver does not take version restrictions in the latter file into account anymore, potentially resulting in inconsistent production and development environments. Given the negligible overhead (in terms of memory etc.) of installing development dependencies in production environments, they are only separated from the runtime dependencies in ``requirements.yml`` by a comment.</em></p>
</section>
<section id="how-to-provide-executable-scripts">
<h2>How to provide executable scripts<a class="headerlink" href="#how-to-provide-executable-scripts" title="Permalink to this heading">¶</a></h2>
<p>By default, a single executable script called flying-circus is provided. It is created when the package is installed. When you call it, the main function (<code class="docutils literal notranslate"><span class="pre">cli</span></code>) in <code class="docutils literal notranslate"><span class="pre">src/flying_circus/cli.py</span></code> is called.</p>
<p>When the package is installed, a executable script named <code class="docutils literal notranslate"><span class="pre">flying-circus</span></code> is created in the bin folder of the active conda environment. Upon calling this script in the shell, the <code class="docutils literal notranslate"><span class="pre">main</span></code> function in <code class="docutils literal notranslate"><span class="pre">src/flying_circus/cli.py</span></code> is executed.</p>
<p>The scripts, their names and entry points are specified in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> in the <code class="docutils literal notranslate"><span class="pre">[project.scripts]</span></code> section. Just add additional entries to provide more scripts to the users of your package.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">MCH Python Blueprint</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#contributing-to-the-blueprint-code">Contributing to the blueprint code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ and Troubleshooting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development_tools.html">Development Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ci_cd.html">CI / CD (Jenkins and GH Actions)</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, MeteoSwiss-APN.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/example_project/CONTRIBUTING.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>